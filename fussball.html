<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Turnierplan</title>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: Arial, sans-serif; background: #f4f6f9; }

    /* SIDEBAR */
    #sidebar {
      position: fixed; top: 0; left: -250px;
      width: 250px; height: 100%; background: #fff; padding: 10px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.3);
      transition: left .3s ease; z-index: 1000;
    }
    #sidebar.open { left: 0; }
    #closeSidebar { float: right; font-size: 24px; cursor: pointer; }
    #sidebar h2 { margin-top: 0; }
    #sidebar ul { list-style: none; padding: 0; margin-top: 20px; }
    #sidebar li {
      padding: 8px; cursor: pointer; border-bottom: 1px solid #ccc;
    }
    #sidebar li.highlight { background: orange; color: #fff; }
    #clearFilter {
      margin-top: 10px; padding: 6px 12px;
      border: 1px solid #ccc; background: #fff;
      border-radius: 4px; cursor: pointer; width: 100%;
    }

    /* HAUPTBEREICH */
    .wrapper { margin-left: 0; transition: margin-left .3s ease; }
    .wrapper.shifted { margin-left: 250px; }

    /* HEADER & NAV */
    header {
      display: flex; align-items: center;
      padding: 10px 20px; background: transparent;
    }
    #hamburger {
      font-size: 24px; background: none; border: none;
      cursor: pointer; margin-right: 10px;
    }
    header img { height: 50px; }
    .top-buttons { margin-left: auto; }
    .top-buttons a {
      margin: 0 5px; padding: 8px 16px; border: 1px solid #ccc;
      background: #fff; text-decoration: none; color: #333;
      border-radius: 4px; cursor: pointer;
    }
    .spieltag-nav {
      display: flex; align-items: center; justify-content: center;
      margin: 20px 0;
    }
    .spieltag-nav button {
      font-size: 18px; padding: 6px 12px; margin: 0 20px;
      border: 1px solid #ccc; background: #fff;
      border-radius: 4px; cursor: pointer;
    }
    .spieltag-date {
      margin: 0 10px; padding: 4px; border: 1px solid #ccc;
      border-radius: 4px; text-align: center;
    }

    /* TEAM-EDITOR */
    #teamEditor {
      display: none; background: #fff; padding: 10px 20px;
      margin: 20px; border: 1px solid #ccc; border-radius: 4px;
    }
    #teamEditor h3 { margin-top: 0; }
    #teamEditor .edit-row { margin-bottom: 8px; }
    #teamEditor label { display: inline-block; width: 50px; }
    #teamEditor input {
      width: 150px; padding: 4px; border: 1px solid #ccc; border-radius: 4px;
    }

    /* GRUPPEN-TABELLEN */
    .group-tables {
      display: flex; justify-content: space-around;
      padding: 20px; background: #f9f6f2;
    }
    .group-tables table {
      width: 45%; border-collapse: collapse; background: #fff;
    }
    .group-tables th, .group-tables td {
      border: 1px solid #ccc; padding: 6px; text-align: center;
    }
    .group-tables th { background: #003366; color: #fff; }

    /* SPIELTAG-BLOCKS */
    .spieltag-block { display: none; margin-bottom: 30px; }
    .spieltag-info small {
      display: none; margin-bottom: 4px; font-size: 0.9rem; color: #333;
      text-align: left;
    }
    .spieltag-block table {
      width: 100%; border-collapse: collapse; background: #fff;
    }
    .spieltag-block th, .spieltag-block td {
      border: 1px solid #ccc; padding: 6px; text-align: center;
    }
    .spieltag-block th { background: #003366; color: #fff; }
    .result-input {
      display: flex; justify-content: center; align-items: center;
    }
    .result-input input {
      width: 40px; text-align: center; margin: 0 2px;
    }

    /* ADMIN-PIN */
    .admin-pin {
      margin: 20px auto; text-align: center;
    }
    .admin-pin input {
      width: 60px; padding: 4px; margin-right: 4px;
      border: 1px solid #ccc; border-radius: 4px;
    }
    .admin-pin button {
      padding: 4px 8px; border: 1px solid #ccc;
      background: #fff; border-radius: 4px; cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- SIDEBAR -->
  <div id="sidebar">
    <span id="closeSidebar">&times;</span>
    <h2>Teams</h2>
    <ul id="sidebarList">
      <li data-team="A1">Team A1</li><li data-team="A2">Team A2</li>
      <li data-team="A3">Team A3</li><li data-team="A4">Team A4</li>
      <li data-team="A5">Team A5</li><li data-team="A6">Team A6</li>
      <li data-team="B1">Team B1</li><li data-team="B2">Team B2</li>
      <li data-team="B3">Team B3</li><li data-team="B4">Team B4</li>
      <li data-team="B5">Team B5</li><li data-team="B6">Team B6</li>
    </ul>
    <button id="clearFilter">Filter zurücksetzen</button>
  </div>

  <!-- HAUPTBEREICH -->
  <div class="wrapper" id="main">

    <!-- HEADER -->
    <header>
      <button id="hamburger">☰</button>
      <img src="Image.png" alt="Logo">
      <div class="top-buttons">
        <a href="#">Vorrunde</a><a href="#">Hauptrunde</a><a href="#">Playoffs</a>
      </div>
    </header>

    <!-- TEAM-EDITOR -->
    <div id="teamEditor"><h3>Teamnamen bearbeiten</h3></div>

    <!-- GRUPPENSTANDINGS -->
    <div class="group-tables">
      <table id="groupA">
        <caption>Gruppe A</caption>
        <thead><tr><th>Team</th><th>Spiele</th><th>Siege</th><th>Punkte</th></tr></thead>
        <tbody>
          <tr data-team="A1"><td>Team A1</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="A2"><td>Team A2</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="A3"><td>Team A3</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="A4"><td>Team A4</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="A5"><td>Team A5</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="A6"><td>Team A6</td><td>0</td><td>0</td><td>0:0</td></tr>
        </tbody>
      </table>
      <table id="groupB">
        <caption>Gruppe B</caption>
        <thead><tr><th>Team</th><th>Spiele</th><th>Siege</th><th>Punkte</th></tr></thead>
        <tbody>
          <tr data-team="B1"><td>Team B1</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="B2"><td>Team B2</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="B3"><td>Team B3</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="B4"><td>Team B4</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="B5"><td>Team B5</td><td>0</td><td>0</td><td>0:0</td></tr>
          <tr data-team="B6"><td>Team B6</td><td>0</td><td>0</td><td>0:0</td></tr>
        </tbody>
      </table>
    </div>

    <!-- SPIELTAG NAVIGATION -->
    <div class="spieltag-nav">
      <button id="prevDay">&larr;</button>
      <input type="date" id="date-input" class="spieltag-date">
      <span>Spieltag <span id="dayNumber">1</span></span>
      <button id="nextDay">&rarr;</button>
    </div>

    <!-- SPIELTAG-BLOCKS -->
    <div class="spieltage">
      <!-- Tag 1 -->
      <div id="day1-block" class="spieltag-block">
        <div class="spieltag-info"><small>Spieltag 1 – <span class="date-display"></span></small></div>
        <table data-day="1">
          <thead>
            <tr><th>Feld</th><th>Zeit</th><th>Team A</th><th>Team B</th><th>Ergebnis</th><th>Schiedsrichter</th></tr>
          </thead>
          <tbody>
            <tr data-team-a="A1" data-team-b="A4" data-ref="A3">
              <td>Feld 1</td><td>16:15–16:30</td><td>Team A1</td><td>Team A4</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A3</td>
            </tr>
            <tr data-team-a="A2" data-team-b="A5" data-ref="A1">
              <td>Feld 1</td><td>16:35–16:50</td><td>Team A2</td><td>Team A5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A1</td>
            </tr>
            <tr data-team-a="A3" data-team-b="A6" data-ref="A2">
              <td>Feld 1</td><td>16:55–17:10</td><td>Team A3</td><td>Team A6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A2</td>
            </tr>
            <tr data-team-a="A1" data-team-b="A5" data-ref="A4">
              <td>Feld 1</td><td>17:15–17:30</td><td>Team A1</td><td>Team A5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A4</td>
            </tr>
            <tr data-team-a="A2" data-team-b="A6" data-ref="A5">
              <td>Feld 1</td><td>17:35–17:50</td><td>Team A2</td><td>Team A6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A5</td>
            </tr>
            <tr data-team-a="A3" data-team-b="A1" data-ref="A6">
              <td>Feld 1</td><td>17:55–18:10</td><td>Team A3</td><td>Team A1</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A6</td>
            </tr>
            <tr data-team-a="A5" data-team-b="A6" data-ref="A3">
              <td>Feld 1</td><td>18:15–18:30</td><td>Team A5</td><td>Team A6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A3</td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- Tag 2 -->
      <div id="day2-block" class="spieltag-block">
        <div class="spieltag-info"><small>Spieltag 2 – <span class="date-display"></span></small></div>
        <table data-day="2">
          <thead>
            <tr><th>Feld</th><th>Zeit</th><th>Team A</th><th>Team B</th><th>Ergebnis</th><th>Schiedsrichter</th></tr>
          </thead>
          <tbody>
            <tr data-team-a="B1" data-team-b="B4" data-ref="B3">
              <td>Feld 1</td><td>16:15–16:30</td><td>Team B1</td><td>Team B4</td>  
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td> 
              <td>Team B3</td>
            </tr>
            <tr data-team-a="B2" data-team-b="B5" data-ref="B1">
              <td>Feld 1</td><td>16:35–16:50</td><td>Team B2</td><td>Team B5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B1</td>
            </tr>
            <tr data-team-a="B3" data-team-b="B4" data-ref="B2">
              <td>Feld 1</td><td>16:55–17:10</td><td>Team B3</td><td>Team B4</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B2</td>
            </tr>
            <tr data-team-a="B1" data-team-b="B5" data-ref="B4">
              <td>Feld 1</td><td>17:15–17:30</td><td>Team B1</td><td>Team B5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B4</td>
            </tr>
            <tr data-team-a="B2" data-team-b="B6" data-ref="B5">
              <td>Feld 1</td><td>17:35–17:50</td><td>Team B2</td><td>Team B6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B5</td>
            </tr>
            <tr data-team-a="B3" data-team-b="B1" data-ref="B6">
              <td>Feld 1</td><td>17:55–18:10</td><td>Team B3</td><td>Team B1</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B6</td>
            </tr>
            <tr data-team-a="B5" data-team-b="B6" data-ref="B3">
              <td>Feld 1</td><td>18:15–18:30</td><td>Team B5</td><td>Team B6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B3</td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- Tag 3 -->
      <div id="day3-block" class="spieltag-block">
        <div class="spieltag-info"><small>Spieltag 3 – <span class="date-display"></span></small></div>
        <table data-day="3">
          <thead>
            <tr><th>Feld</th><th>Zeit</th><th>Team A</th><th>Team B</th><th>Ergebnis</th><th>Schiedsrichter</th></tr>
          </thead>
          <tbody>
            <tr data-team-a="A4" data-team-b="A2" data-ref="A6">
              <td>Feld 1</td><td>16:15–16:30</td><td>Team A4</td><td>Team A2</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A6</td>
            </tr>
            <tr data-team-a="A3" data-team-b="A6" data-ref="A2">
              <td>Feld 1</td><td>16:35–16:50</td><td>Team A3</td><td>Team A6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A2</td>
            </tr>
            <tr data-team-a="A4" data-team-b="A5" data-ref="A3">
              <td>Feld 1</td><td>16:55–17:10</td><td>Team A4</td><td>Team A5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A3</td>
            </tr>
            <tr data-team-a="A1" data-team-b="A6" data-ref="A4">
              <td>Feld 1</td><td>17:15–17:30</td><td>Team A1</td><td>Team A6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A4</td>
            </tr>
            <tr data-team-a="A3" data-team-b="A2" data-ref="A1">
              <td>Feld 1</td><td>17:35–17:50</td><td>Team A3</td><td>Team A2</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A1</td>
            </tr>
            <tr data-team-a="A4" data-team-b="A6" data-ref="A5">
              <td>Feld 1</td><td>17:55–18:10</td><td>Team A4</td><td>Team A6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A5</td>
            </tr>
            <tr data-team-a="A1" data-team-b="A2" data-ref="A3">
              <td>Feld 1</td><td>18:15–18:30</td><td>Team A1</td><td>Team A2</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A3</td>
            </tr>
            <tr data-team-a="A3" data-team-b="A5" data-ref="A2">
              <td>Feld 1</td><td>18:35–18:50</td><td>Team A3</td><td>Team A5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team A2</td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- Tag 4 -->
      <div id="day4-block" class="spieltag-block">
        <div class="spieltag-info"><small>Spieltag 4 – <span class="date-display"></span></small></div>
        <table data-day="4">
          <thead>
            <tr><th>Feld</th><th>Zeit</th><th>Team A</th><th>Team B</th><th>Ergebnis</th><th>Schiedsrichter</th></tr>
          </thead>
          <tbody>
            <tr data-team-a="B4" data-team-b="B2" data-ref="B6">
              <td>Feld 1</td><td>16:15–16:30</td><td>Team B4</td><td>Team B2</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B6</td>
            </tr>
            <tr data-team-a="B3" data-team-b="B6" data-ref="B2">
              <td>Feld 1</td><td>16:35–16:50</td><td>Team B3</td><td>Team B6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B2</td>
            </tr>
            <tr data-team-a="B4" data-team-b="B5" data-ref="B3">
              <td>Feld 1</td><td>16:55–17:10</td><td>Team B4</td><td>Team B5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B3</td>
            </tr>
            <tr data-team-a="B1" data-team-b="B6" data-ref="B4">
              <td>Feld 1</td><td>17:15–17:30</td><td>Team B1</td><td>Team B6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B4</td>
            </tr>
            <tr data-team-a="B3" data-team-b="B2" data-ref="B1">
              <td>Feld 1</td><td>17:35–17:50</td><td>Team B3</td><td>Team B2</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B1</td>
            </tr>
            <tr data-team-a="B4" data-team-b="B6" data-ref="B5">
              <td>Feld 1</td><td>17:55–18:10</td><td>Team B4</td><td>Team B6</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B5</td>
            </tr>
            <tr data-team-a="B1" data-team-b="B2" data-ref="B3">
              <td>Feld 1</td><td>18:15–18:30</td><td>Team B1</td><td>Team B2</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B3</td>
            </tr>
            <tr data-team-a="B3" data-team-b="B5" data-ref="B2">
              <td>Feld 1</td><td>18:35–18:50</td><td>Team B3</td><td>Team B5</td>
              <td class="result-input"><input type="number" min="0" disabled><span>:</span><input type="number" min="0" disabled></td>
              <td>Team B2</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ADMIN-PIN -->
    <div class="admin-pin">
      PIN: <input type="password" id="pin-input" placeholder="3141">
      <button id="pinBtn">OK</button>
    </div>
  </div>

  <script>
    // Team- und Datums-Mappings
    const teamMapping = {
      A1:'Team A1',A2:'Team A2',A3:'Team A3',
      A4:'Team A4',A5:'Team A5',A6:'Team A6',
      B1:'Team B1',B2:'Team B2',B3:'Team B3',
      B4:'Team B4',B5:'Team B5',B6:'Team B6'
    };
    const dateMapping = { '1':'','2':'','3':'','4':'' };

    // Sidebar toggle
    const sidebar = document.getElementById('sidebar'),
          main    = document.getElementById('main');
    document.getElementById('hamburger').onclick = () => {
      sidebar.classList.toggle('open');
      main.classList.toggle('shifted');
    };
    document.getElementById('closeSidebar').onclick = () => {
      sidebar.classList.remove('open');
      main.classList.remove('shifted');
    };

    // Filter zurücksetzen: Seite neu laden
    document.getElementById('clearFilter').onclick = () => {
      location.reload();
    };

    // Team-Filter
    let selectedTeam = null;
    document.querySelectorAll('#sidebarList li').forEach(li => {
      li.onclick = () => {
        document.querySelectorAll('#sidebarList li').forEach(x => x.classList.remove('highlight'));
        li.classList.add('highlight');
        selectedTeam = li.dataset.team;
        renderGroups();
        renderMatches();
      };
    });

    function renderGroups() {
      document.querySelectorAll('.group-tables tbody tr').forEach(r => {
        r.style.background = (r.dataset.team === selectedTeam) ? 'orange' : '';
      });
    }

    // Spieltag-Navigation & Datum
    let currentDay = 1, maxDay = 4;
    const dayNum = document.getElementById('dayNumber'),
          dateInput = document.getElementById('date-input');
    document.getElementById('prevDay').onclick = () => { if (currentDay>1) switchDay(--currentDay); };
    document.getElementById('nextDay').onclick = () => { if (currentDay<maxDay) switchDay(++currentDay); };
    dateInput.onchange = () => { dateMapping[currentDay] = dateInput.value; };

    function switchDay(n) {
      currentDay = n;
      dayNum.textContent = n;
      dateInput.value = dateMapping[n] || '';
      renderMatches();
    }

    // Render Matches
    function renderMatches() {
      const nav = document.querySelector('.spieltag-nav');
      if (selectedTeam) {
        nav.style.display = 'none';
        document.querySelectorAll('.spieltag-info small').forEach(s => s.style.display = 'block');
        for (let d = 1; d <= 4; d++) {
          const block = document.getElementById(`day${d}-block`);
          const rows = block.querySelectorAll('tbody tr');
          let any = false;
          rows.forEach(r => {
            const ta = r.dataset.teamA, tb = r.dataset.teamB;
            const show = (ta === selectedTeam || tb === selectedTeam);
            r.style.display = show ? '' : 'none';
            if (show) any = true;
          });
          if (any) {
            block.style.display = 'block';
            block.querySelector('.date-display').textContent =
              dateMapping[d] ? new Date(dateMapping[d]).toLocaleDateString('de-DE') : '–';
          } else {
            block.style.display = 'none';
          }
        }
      } else {
        nav.style.display = 'flex';
        document.querySelectorAll('.spieltag-info small').forEach(s => s.style.display = 'none');
        for (let d = 1; d <= 4; d++) {
          document.getElementById(`day${d}-block`).style.display =
            (d === currentDay) ? 'block' : 'none';
        }
      }
    }

    // Admin-Modus, Ergebnisse & Editor & Sortierung
    let adminOn = false;
    const teamEditor = document.getElementById('teamEditor');
    document.getElementById('pinBtn').onclick = () => {
      const pin = document.getElementById('pin-input').value;
      if (pin === '3141') {
        adminOn = true;
        enableResults();
        showTeamEditor();
        alert('Admin-Modus aktiviert');
      } else {
        alert('Falsche PIN');
      }
      document.getElementById('pin-input').value = '';
    };
    // disable result inputs initially
    document.querySelectorAll('.result-input input').forEach(i => i.setAttribute('disabled',''));
    function enableResults() {
      document.querySelectorAll('.result-input input').forEach(input => {
        input.removeAttribute('disabled');
        input.onblur = updateGroupStats;
      });
    }
    function showTeamEditor() {
      teamEditor.style.display = 'block';
      teamEditor.innerHTML = '<h3>Teamnamen bearbeiten</h3>';
      Object.keys(teamMapping).forEach(code => {
        const row = document.createElement('div');
        row.className = 'edit-row';
        row.innerHTML =
          `<label>${code}:</label>`+
          `<input id="edit-${code}" value="${teamMapping[code]}">`;
        teamEditor.appendChild(row);
        document.getElementById(`edit-${code}`).onchange = e => {
          teamMapping[code] = e.target.value;
          updateAllNames();
        };
      });
    }
    function updateAllNames() {
      document.querySelectorAll('#sidebarList li').forEach(li => {
        li.textContent = teamMapping[li.dataset.team];
      });
      document.querySelectorAll('.group-tables tbody tr').forEach(r => {
        r.children[0].textContent = teamMapping[r.dataset.team];
      });
      document.querySelectorAll('.spieltag-block table tbody tr').forEach(r => {
        r.children[2].textContent = teamMapping[r.dataset.teamA];
        r.children[3].textContent = teamMapping[r.dataset.teamB];
        r.children[5].textContent = teamMapping[r.dataset.ref];
      });
    }
    function updateGroupStats() {
      const stats = {};
      document.querySelectorAll('#groupA tbody tr, #groupB tbody tr').forEach(r => {
        stats[r.dataset.team] = { games:0, wins:0, gf:0, ga:0 };
      });
      // only visible blocks
      document.querySelectorAll('.spieltag-block').forEach(block => {
        if (block.style.display === 'block') {
          block.querySelectorAll('tbody tr').forEach(r => {
            if (r.style.display !== 'none') {
              const ta = r.dataset.teamA, tb = r.dataset.teamB;
              const [i1,i2] = r.children[4].querySelectorAll('input');
              const g1 = parseInt(i1.value,10), g2 = parseInt(i2.value,10);
              if (!isNaN(g1) && !isNaN(g2)) {
                stats[ta].games++; stats[ta].gf+=g1; stats[ta].ga+=g2; if (g1>g2) stats[ta].wins++;
                stats[tb].games++; stats[tb].gf+=g2; stats[tb].ga+=g1; if (g2>g1) stats[tb].wins++;
              }
            }
          });
        }
      });
      ['A','B'].forEach(pref => {
        const tbody = document.querySelector(`#group${pref} tbody`);
        Object.keys(stats).filter(c=>c.startsWith(pref)).forEach(code => {
          const r = tbody.querySelector(`tr[data-team="${code}"]`);
          const s = stats[code];
          r.children[1].textContent = s.games;
          r.children[2].textContent = s.wins;
          r.children[3].textContent = `${s.gf}:${s.ga}`;
        });
        const rows = Array.from(tbody.querySelectorAll('tr'));
        rows.sort((r1,r2) => {
          const s1 = stats[r1.dataset.team], s2 = stats[r2.dataset.team];
          if (s2.wins!==s1.wins) return s2.wins-s1.wins;
          return (s2.gf - s2.ga) - (s1.gf - s1.ga);
        });
        rows.forEach(r => tbody.appendChild(r));
      });
    }

    // Initialisierung
    switchDay(1);
    renderMatches();
    updateAllNames();
  </script>
</body>
</html>
